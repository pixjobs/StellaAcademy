# ==========================================================================
#            STELLA ACADEMY — ENVIRONMENT CONFIGURATION TEMPLATE
# ==========================================================================
# Copy to `.env.local` and fill in values as needed (never commit real secrets).

# ----------------------------------------------------------------------------
# GENERAL APP CONFIG
# ----------------------------------------------------------------------------
GOOGLE_CLOUD_PROJECT=stella-academy
USE_APOD_BG=true

# ----------------------------------------------------------------------------
# OLLAMA (LOCAL FALLBACK)
# ----------------------------------------------------------------------------
# Local dev default; Cloud Run/GSM can override OLLAMA_BASE_URL.
OLLAMA_BASE_URL=http://127.0.0.1:11434
OLLAMA_MODEL=gpt-oss:20b
# Optional bearer if your provider requires it
OLLAMA_BEARER_TOKEN=

# ----------------------------------------------------------------------------
# NASA API (LOCAL FALLBACK)
# ----------------------------------------------------------------------------
NASA_API_KEY=

# ----------------------------------------------------------------------------
# CLERK AUTH (LOCAL FALLBACK)
# These are REQUIRED for local login.
# ----------------------------------------------------------------------------
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=

# ----------------------------------------------------------------------------
# GOOGLE CUSTOM SEARCH (OPTIONAL WEB ENRICHMENT)
# Keep GSM secrets as UPPER_SNAKE_CASE (matches your current setup).
# ----------------------------------------------------------------------------
GOOGLE_CUSTOM_SEARCH_KEY=
GOOGLE_CUSTOM_SEARCH_CX=
# (If some code expects ENGINE_ID specifically, you can optionally mirror CX:)
GOOGLE_CUSTOM_SEARCH_ENGINE_ID=

# ----------------------------------------------------------------------------
# REDIS / BULLMQ — ONLINE-FIRST WITH LOCAL FALLBACK
# ----------------------------------------------------------------------------
# Prefer ONLINE (e.g., Upstash **TLS connection string**, NOT REST):
#   rediss://default:<PASSWORD>@<host>.upstash.io:6379
REDIS_URL_ONLINE=
# Local dev fallback
REDIS_URL_LOCAL=redis://127.0.0.1:6379
# Force local even if ONLINE is set (0 = off, 1 = on)
FORCE_LOCAL_REDIS=0

# Shared queue name (must match web & worker)
LLM_QUEUE_NAME=llm-queue

# ----------------------------------------------------------------------------
# WORKER / ENRICHMENT TUNABLES (OPTIONAL)
# ----------------------------------------------------------------------------
# Worker concurrency (1–8)
OLLAMA_WORKER_CONCURRENCY=1
# Extra logging
DEBUG_WORKER=0
DEBUG_LLM_ENQUEUE=0
# Web enrichment toggles (any one disables)
ENABLE_WEB_ENRICH=1
DISABLE_WEB_ENRICH=0

# Result cache TTLs (ms)
LLM_CACHE_SOFT_MS=300000       # 5m: serve cached as "completed"
LLM_CACHE_HARD_MS=1800000      # 30m: drop cache after this

# Negative-cache & ID grace (ms)
LLM_MISSING_TTL_MS=120000      # 2m window for missing IDs
LLM_MISSING_MAX_HITS=5         # after this, return 410 Gone
LLM_POSTED_GRACE_MS=600000     # 10m: special handling for recent posts

# BullMQ retention (seconds)
LLM_KEEP_COMPLETE_AGE=300      # keep completed ~5m
LLM_KEEP_FAIL_AGE=1800         # keep failed ~30m

# ============================================================================
#                  GOOGLE SECRET MANAGER (GSM) SECRET NAMES
# ============================================================================
# These tell the boot/secrets loader which GSM secret to fetch for each var.
# Values on the right are the **actual GSM secret names you already created**.
# Keep these exactly as listed below to match your current setup.

# Core app
OLLAMA_BASE_URL_SECRET=OLLAMA_BASE_URL
NASA_API_KEY_SECRET=NASA_API_KEY
# If you want to also allow the older kebab-case NASA secret, keep this optional:
NASA_API_KEY_ALT_SECRET=nasa-api-key

# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY_SECRET=NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
CLERK_SECRET_KEY_SECRET=CLERK_SECRET_KEY

# Optional provider token
OLLAMA_BEARER_TOKEN_SECRET=OLLAMA_BEARER_TOKEN

# Redis connection (online-first)
REDIS_URL_ONLINE_SECRET=REDIS_URL_ONLINE

# Google Custom Search (UPPER_SNAKE — matches your existing GSM)
GOOGLE_CUSTOM_SEARCH_KEY_SECRET=GOOGLE_CUSTOM_SEARCH_KEY
GOOGLE_CUSTOM_SEARCH_CX_SECRET=GOOGLE_CUSTOM_SEARCH_CX
# Optional mirror if some code reads ENGINE_ID:
GOOGLE_CUSTOM_SEARCH_ENGINE_ID_SECRET=GOOGLE_CUSTOM_SEARCH_CX
